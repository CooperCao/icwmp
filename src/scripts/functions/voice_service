#!/bin/sh
# Copyright (C) 2012 Luka Perkov <freecwmp@lukaperkov.net>
# Copyright (C) 2012 Ahmed Zribi <ahmed.zribi@pivasoftware.com>

# OPTIONAL: InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.SIP.ProxyServer
# OPTIONAL: InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.SIP.ProxyServerPort
# OPTIONAL: InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.SIP.ProxyServerTransport
# OPTIONAL: InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.SIP.RegistrarServer
# OPTIONAL: InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.SIP.RegistrarServerPort
# OPTIONAL: InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.SIP.RegistrarServerTransport
# OPTIONAL: InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.SIP.UserAgentDomain
# OPTIONAL: InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.SIP.UserAgentTransport
# OPTIONAL: InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.SIP.OutbandProxy
# OPTIONAL: InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.SIP.OutbandProxyPort


# under InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.

get_voice_profile_enable() {
local num="$1"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.enabled`
	let num=$num+1
	if [ "$val" = "0" ]; then
	    val="Disabled"
	else
	    val="Enabled"
	fi
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Enable" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Enable" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Enable"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Enable" "$val"
	;; 
esac
}

set_voice_profile_enable() {
local num="$1"
local val="$2"
case $action in
	set_value)
	if [ "$val" = "Enabled" ]; then
	    val="1"
	else
	    val="0"
	fi
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num.enabled="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Enable"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_voice_profile_reset() {
local num="$1"
local val=""
local type="xsd:boolean"
local permissions=""
case "$action" in
	get_value)
	val="0"
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Reset" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Reset" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Reset"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Reset" "$val"
	;; 
esac
}

set_voice_profile_reset() {
local num="$1"
local val="$2"
case $action in
	set_value)
	if [ "$val" = "1" ];then
		/etc/init.d/asterisk reload
	fi
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Reset"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_voice_profile_name() {
local num="$1"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num._title`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Name" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Name" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Name"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Name" "$val"
	;; 
esac
}

set_voice_profile_name() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num._title="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Name"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_voice_profile_signaling_protocol() {
local num="$1"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val="SIP"
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SignalingProtocol" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SignalingProtocol" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SignalingProtocol"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SignalingProtocol" "$val"
	;; 
esac
}

set_voice_profile_signaling_protocol() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SignalingProtocol"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_voice_profile_max_sessions() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	number_line=`/usr/sbin/asterisk -rx "brcm show status"|grep "Subchannel:"|sort -u|wc -l`
	sub_channel=`/usr/sbin/asterisk -rx "brcm show status"|grep -c "Default context     : sip$num"`
	let val=$number_line*$sub_channel
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.MaxSessions" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.MaxSessions" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.MaxSessions"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.MaxSessions" "$val"
	;; 
esac
}

get_voice_profile_number_of_lines() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/usr/sbin/asterisk -rx "brcm show status"|grep -c "Default context     : sip$num"`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.NumberOfLines" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.NumberOfLines" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.NumberOfLines"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.NumberOfLines" "$val"
	;; 
esac
}

#under InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.

get_sip_proxy_server() {
local num="$1"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.SIP.sip_proxy`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServer" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServer" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServer"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServer" "$val"
	;; 
esac
}

set_sip_proxy_server() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.SIP.sip_proxy="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServer"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_proxy_server_port() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/usr/sbin/asterisk -rx "brcm show status"|grep -c "Default context     : sip$num"`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServerPort" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServerPort" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServerPort"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServerPort" "$val"
	;; 
esac
}

set_sip_proxy_server_port() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServerPort"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_proxy_server_transport() {
local num="$1"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val=`/usr/sbin/asterisk -rx "sip show settings"|grep "Outbound transport"|awk -F' ' '{print $3}'`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServerTransport" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServerTransport" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServerTransport"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServerTransport" "$val"
	;; 
esac
}

set_sip_proxy_server_transport() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ProxyServerTransport"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_registrar_server() {
local num="$1"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.host`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServer" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServer" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServer"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServer" "$val"
	;; 
esac
}

set_sip_registrar_server() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num.host="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServer"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_registrar_server_port() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.port`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServerPort" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServerPort" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServerPort"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServerPort" "$val"
	;; 
esac
}

set_sip_registrar_server_port() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num.port="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServerPort"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_registrar_server_transport() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/usr/sbin/asterisk -rx "sip show settings"|grep "Outbound transport"|awk -F' ' '{print $3}'`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServerTransport" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServerTransport" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServerTransport"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServerTransport" "$val"
	;; 
esac
}

set_sip_registrar_server_transport() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrarServerTransport"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_user_agent_domain() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.domain`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentDomain" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentDomain" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentDomain"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentDomain" "$val"
	;; 
esac
}

set_sip_user_agent_domain() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num.domain="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentDomain"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_user_agent_port() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.SIP.bindport`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentPort" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentPort" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentPort"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentPort" "$val"
	;; 
esac
}

set_sip_user_agent_port() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.SIP.bindport="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentPort"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_user_agent_transport() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/usr/sbin/asterisk -rx "sip show settings"|grep "Allowed transports"|awk -F' ' '{print $3}'`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentTransport" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentTransport" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentTransport"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentTransport" "$val"
	;; 
esac
}

set_sip_user_agent_transport() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.UserAgentTransport"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_outbound_proxy() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.outboundproxy`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.OutboundProxy" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.OutboundProxy" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.OutboundProxy"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.OutboundProxy" "$val"
	;; 
esac
}

set_sip_outbound_proxy() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num.outboundproxy="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.OutboundProxy"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_outbound_proxy_port() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.outboundport`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.OutboundProxyPort" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.OutboundProxyPort" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.OutboundProxyPort"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.OutboundProxyPort" "$val"
	;; 
esac
}

set_sip_outbound_proxy_port() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.outboundport="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.OutboundProxyPort"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_organization() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/usr/sbin/asterisk -rx "brcm show status"|grep -c "Default context     : sip$num"`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.Organization" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.Organization" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.Organization"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.Organization" "$val"
	;; 
esac
}

set_sip_organization() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.Organization"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_registration_period() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.SIP.registertimeout`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrationPeriod" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrationPeriod" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrationPeriod"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrationPeriod" "$val"
	;; 
esac
}

set_sip_registration_period() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.SIP.registertimeout="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistrationPeriod"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_invite_expires() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/usr/sbin/asterisk -rx "brcm show status"|grep -c "Default context     : sip$num"`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InviteExpires" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InviteExpires" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InviteExpires"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InviteExpires" "$val"
	;; 
esac
}

set_sip_invite_expires() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InviteExpires"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_re_invite_expires() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/usr/sbin/asterisk -rx "brcm show status"|grep -c "Default context     : sip$num"`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ReInviteExpires" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ReInviteExpires" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ReInviteExpires"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ReInviteExpires" "$val"
	;;
esac
}

set_sip_re_invite_expires() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.ReInviteExpires"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_register_expires() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.SIP.registertimeout`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegisterExpires" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegisterExpires" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegisterExpires"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegisterExpires" "$val"
	;; 
esac
}

set_sip_register_expires() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.SIP.registertimeout="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegisterExpires"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_registers_min_expires() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/usr/sbin/asterisk -rx "brcm show status"|grep -c "Default context     : sip$num"`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistersMinExpires" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistersMinExpires" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistersMinExpires"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistersMinExpires" "$val"
	;; 
esac
}

set_sip_registers_min_expires() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegistersMinExpires"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_register_retry_interval() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.SIP.registertimeout`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegisterRetryInterval" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegisterRetryInterval" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegisterRetryInterval"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegisterRetryInterval" "$val"
	;; 
esac
}

set_sip_register_retry_interval() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.SIP.registertimeout="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.RegisterRetryInterval"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_inbound_auth() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	# Digest
	val="None"
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuth" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuth" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuth"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuth" "$val"
	;; 
esac
}

set_sip_inbound_auth() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuth"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_inbound_auth_username() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=""
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuthUsername" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuthUsername" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuthUsername"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuthUsername" "$val"
	;; 
esac
}

set_sip_inbound_auth_username() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuthUsername"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_sip_inbound_auth_password() {
local num="$1"
local val=""
local type="xsd:unsignedInt"
local permissions=""
case "$action" in
	get_value)
	val=""
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuthPassword" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuthPassword" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuthPassword"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuthPassword" "$val"
	;; 
esac
}

set_sip_inbound_auth_password() {
local num="$1"
local val="$2"
case $action in
	set_value)
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.SIP.InboundAuthPassword"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}
#under InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.

get_line_enable() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.enabled 2> /dev/null`
	let num=$num+1
	if [ "$val" = "0" ]; then
	    val="Disabled"
	else
	    val="Enabled"
	fi
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.Enable" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.Enable" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.Enable"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.Enable" "$val"
	;; 
esac
}

set_line_enable() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val="$4"
case $action in
	set_value)
	if [ "$val" = "Enabled" ]; then
	    val="1"
	else
	    val="0"
	fi
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num.enabled="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.Enable"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_line_directory_number() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.$line_name.extension`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.DirectoryNumber" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.DirectoryNumber" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.DirectoryNumber"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.DirectoryNumber" "$val"
	;; 
esac
}

set_line_directory_number() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val="$4"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.brcm$num.extension="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.DirectoryNumber"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_line_status() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val1="/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -P /var/state -q get asterisk.sip$num.sip_registry_registered"
	val2="/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -P /var/state -q get asterisk.sip$num.sip_registry_request_sent"
	if [ "$val1" = "yes" ];then
		val="Up"
	else
		if [ "$val2" = "yes" ];then
			val="Registering"
		else
			val="Disabled"
		fi
	fi
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.Status" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.Status" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.Status"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.Status" "$val"
	;; 
esac
}

get_line_call_state() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	state=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -P /var/state -q get chan_brcm.$line_name.subchannel_0`
	if [ "$state" = "ONHOOK" ];then
		val="Idle"
	elif [ "$state" = "OFFHOOK" ];then
		val="Disconnecting"
	elif [ "$state" = "DIALING" ];then
		val="Calling"
	elif [ "$state" = "INCALL" ];then
		val="InCall"
	elif [ "$state" = "RINGING" ];then
		val="Ringing"
	fi
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.CallState" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.CallState" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.CallState"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.CallState" "$val"
	;; 
esac
}

get_line_calling_features_caller_id_name() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.displayname`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.CallingFeatures.CallerIDName" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.CallingFeatures.CallerIDName" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.CallingFeatures.CallerIDName"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.CallingFeatures.CallerIDName" "$val"
	;; 
esac
}

set_line_calling_features_caller_id_name() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val="$4"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.displayname="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.CallingFeatures.CallerIDName"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

#under InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.

get_line_sip_username() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.authuser 2> /dev/null`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.AuthUserName" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.AuthUserName" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.AuthUserName"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.AuthUserName" "$val"
	;; 
esac
}

set_line_sip_username() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num.authuser="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.Line.$num.SIP.AuthUserName"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_line_sip_password() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.secret 2> /dev/null`
	let num=$num+1
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.AuthPassword" "$val" "$permissions"
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.AuthPassword" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.AuthPassword"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.AuthPassword" "$val"
	;; 
esac
}

set_line_sip_password() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num.secret="$val"
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.1.Line.$num.SIP.AuthPassword"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

get_line_sip_uri() {
local num="$1"
local line_name="$2"
local line_num="$3"
local val=""
local domain=""
local username=""
local type="xsd:string"
local permissions=""
case "$action" in
	get_value)
	domain=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.domain 2> /dev/null`
	username=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q get voice_client.sip$num.authuser 2> /dev/null`
	let num=$num+1
	if [ "$domain" != "" -a "$username" != "" ];then
		freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.URI" "$username@$domain" "$permissions"
	else
		freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.URI" "" "$permissions"
	fi
	;;
	get_name)
	let num=$num+1
	permissions="1"  
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.URI" "$val" "$permissions" "$type"
	;;
	get_notification)
	let num=$num+1
	freecwmp_get_parameter_notification "val" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.URI"
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$line_num.SIP.URI" "$val"
	;; 
esac
}

set_line_sip_uri() {
local num="$1"
local val="$2"
case $action in
	set_value)
	delay_service_restart "voice_client" "5"
	delay_service_restart "asterisk" "6"
	local authuser=${val%@*}
	local domain=${val#*@}
	if [ "$authuser" != "" -a "$domain" != "" ]; then
	  /sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num.authuser="$authuser"
	  /sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q set voice_client.sip$num.domain="$domain"
	fi
	;;
	set_notification)
	let num=$num+1
	local parm="InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$num.Line.$num.SIP.URI"
	freecwmp_set_parameter_notification "$parm" "$val"
	;;
esac
}

# Global SET/GET functions

get_voice_service_max_profile() {
	local val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep -c sip_service_provider`
	let val=$val-1
	eval "export -- \"$1=$val\""
}

get_voice_service_max_line() {
	local val=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep -c brcm_line`
	let val=$val-1
	eval "export -- \"$1=$val\""
}

get_voice_service() {
local max_profile
local max_line
local max_num

get_voice_service_max_profile max_profile
let max_num=$max_profile+1

get_voice_service_max_line max_line

case "$1" in
	InternetGatewayDevice.|\
	InternetGatewayDevice.Services.|\
	InternetGatewayDevice.Services.VoiceService.|\
	InternetGatewayDevice.Services.VoiceService.1.|\
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.)
	for profile_num in `seq 0 $max_profile`;do
		get_voice_profile_enable $profile_num
		get_voice_profile_reset $profile_num
		get_voice_profile_name $profile_num
		get_voice_profile_signaling_protocol $profile_num
		get_voice_profile_max_sessions $profile_num
		get_voice_profile_number_of_lines $profile_num
		get_sip_proxy_server $profile_num
		get_sip_proxy_server_port $profile_num
		get_sip_proxy_server_transport $profile_num
		get_sip_registrar_server $profile_num
		get_sip_registrar_server_port $profile_num
		get_sip_registrar_server_transport $profile_num
		get_sip_user_agent_domain $profile_num
		get_sip_user_agent_port $profile_num
		get_sip_user_agent_transport $profile_num
		get_sip_outbound_proxy $profile_num
		get_sip_outbound_proxy_port $profile_num
		get_sip_organization $profile_num
		get_sip_registration_period $profile_num
		# get_sip_invite_expires $profile_num
		get_sip_re_invite_expires $profile_num
		get_sip_register_expires $profile_num
		# get_sip_registers_min_expires $profile_num
		get_sip_register_retry_interval $profile_num
		# get_sip_inbound_auth $profile_num
		# get_sip_inbound_auth_username $profile_num
		# get_sip_inbound_auth_password $profile_num
		# Line
		local line_number="0"
		for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
			let line_number=$line_number+1
			get_line_enable $profile_num $line_name $line_number
			get_line_directory_number $profile_num $line_name $line_number
			get_line_status $profile_num $line_name $line_number
			get_line_call_state $profile_num $line_name $line_number
			get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			get_line_sip_username $profile_num $line_name $line_number
			get_line_sip_password $profile_num $line_name $line_number
			get_line_sip_uri $profile_num $line_name $line_number
		done
	done
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}." "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_enable $profile_num
		get_voice_profile_reset $profile_num
		get_voice_profile_name $profile_num
		get_voice_profile_signaling_protocol $profile_num
		get_voice_profile_max_sessions $profile_num
		get_voice_profile_number_of_lines $profile_num
		get_sip_proxy_server $profile_num
		get_sip_proxy_server_port $profile_num
		get_sip_proxy_server_transport $profile_num
		get_sip_registrar_server $profile_num
		get_sip_registrar_server_port $profile_num
		get_sip_registrar_server_transport $profile_num
		get_sip_user_agent_domain $profile_num
		get_sip_user_agent_port $profile_num
		get_sip_user_agent_transport $profile_num
		get_sip_outbound_proxy $profile_num
		get_sip_outbound_proxy_port $profile_num
		get_sip_organization $profile_num
		get_sip_registration_period $profile_num
		# get_sip_invite_expires $profile_num
		get_sip_re_invite_expires $profile_num
		get_sip_register_expires $profile_num
		# get_sip_registers_min_expires $profile_num
		get_sip_register_retry_interval $profile_num
		# get_sip_inbound_auth $profile_num
		# get_sip_inbound_auth_username $profile_num
		# get_sip_inbound_auth_password $profile_num
		# Line
		local line_number="0"
		for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
			let line_number=$line_number+1
			get_line_enable $profile_num $line_name $line_number
			get_line_directory_number $profile_num $line_name $line_number
			get_line_status $profile_num $line_name $line_number
			get_line_call_state $profile_num $line_name $line_number
			get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			get_line_sip_username $profile_num $line_name $line_number
			get_line_sip_password $profile_num $line_name $line_number
			get_line_sip_uri $profile_num $line_name $line_number
		done
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP." "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_proxy_server $profile_num
		get_sip_proxy_server_port $profile_num
		get_sip_proxy_server_transport $profile_num
		get_sip_registrar_server $profile_num
		get_sip_registrar_server_port $profile_num
		get_sip_registrar_server_transport $profile_num
		get_sip_user_agent_domain $profile_num
		get_sip_user_agent_port $profile_num
		get_sip_user_agent_transport $profile_num
		get_sip_outbound_proxy $profile_num
		get_sip_outbound_proxy_port $profile_num
		get_sip_organization $profile_num
		get_sip_registration_period $profile_num
		# get_sip_invite_expires $profile_num
		get_sip_re_invite_expires $profile_num
		get_sip_register_expires $profile_num
		# get_sip_registers_min_expires $profile_num
		get_sip_register_retry_interval $profile_num
		# get_sip_inbound_auth $profile_num
		# get_sip_inbound_auth_username $profile_num
		# get_sip_inbound_auth_password $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Enable)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Enable" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_enable $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Reset)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Reset" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_reset $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Name)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Name" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_name $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SignalingProtocol)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SignalingProtocol" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_signaling_protocol $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].MaxSessions)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.MaxSessions" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_max_sessions $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].NumberOfLines)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.NumberOfLines" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_number_of_lines $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServer)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServer" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_proxy_server $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServerPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServerPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_proxy_server_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServerTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServerTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_proxy_server_transport $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServer)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServer" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_registrar_server $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServerPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServerPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_registrar_server_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServerTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServerTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_registrar_server_transport $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentDomain)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentDomain" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_user_agent_domain $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_user_agent_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_user_agent_transport $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.OutboundProxy)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.OutboundProxy" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_outbound_proxy $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.OutboundProxyPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.OutboundProxyPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_outbound_proxy_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.Organization)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.Organization" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_organization $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrationPeriod)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrationPeriod" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_registration_period $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InviteExpires)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InviteExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_invite_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ReInviteExpires)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ReInviteExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_re_invite_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegisterExpires)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegisterExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_register_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistersMinExpires)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistersMinExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_registers_min_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegisterRetryInterval)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegisterRetryInterval" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_register_retry_interval $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuth)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuth" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_inbound_auth $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuthUsername)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuthUsername" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_inbound_auth_username $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuthPassword)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuthPassword" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_inbound_auth_password $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line." "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		# Line
		local line_number="0"
		for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
			let line_number=$line_number+1
			get_line_enable $profile_num $line_name $line_number
			get_line_directory_number $profile_num $line_name $line_number
			get_line_status $profile_num $line_name $line_number
			get_line_call_state $profile_num $line_name $line_number
			get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			get_line_sip_username $profile_num $line_name $line_number
			get_line_sip_password $profile_num $line_name $line_number
			get_line_sip_uri $profile_num $line_name $line_number
		done
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}." "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_enable $profile_num $line_name $line_number
				get_line_directory_number $profile_num $line_name $line_number
				get_line_status $profile_num $line_name $line_number
				get_line_call_state $profile_num $line_name $line_number
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
				get_line_sip_username $profile_num $line_name $line_number
				get_line_sip_password $profile_num $line_name $line_number
				get_line_sip_uri $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].Enable)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.Enable" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_enable $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].DirectoryNumber)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.DirectoryNumber" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_directory_number $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].Status)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.Status" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_status $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallState)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallState" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_call_state $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallingFeatures.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallingFeatures." "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallingFeatures.CallerIDName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallingFeatures.CallerIDName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP." "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_username $profile_num $line_name $line_number
				get_line_sip_password $profile_num $line_name $line_number
				get_line_sip_uri $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.AuthUserName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.AuthUserName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_username $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.AuthPassword)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.AuthPassword" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_password $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.URI)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.URI" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_uri $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
esac
return $FAULT_CPE_INVALID_PARAMETER_NAME;
}

get_voice_service_notification() {
local max_profile
local max_line
local max_num

get_voice_service_max_profile max_profile
let max_num=$max_profile+1

get_voice_service_max_line max_line

case "$1" in
	InternetGatewayDevice.|\
	InternetGatewayDevice.Services.|\
	InternetGatewayDevice.Services.VoiceService.|\
	InternetGatewayDevice.Services.VoiceService.1.|\
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.)
	for profile_num in `seq 0 $max_profile`;do
		get_voice_profile_enable $profile_num
		get_voice_profile_reset $profile_num
		get_voice_profile_name $profile_num
		get_voice_profile_signaling_protocol $profile_num
		get_voice_profile_max_sessions $profile_num
		get_voice_profile_number_of_lines $profile_num
		get_sip_proxy_server $profile_num
		get_sip_proxy_server_port $profile_num
		get_sip_proxy_server_transport $profile_num
		get_sip_registrar_server $profile_num
		get_sip_registrar_server_port $profile_num
		get_sip_registrar_server_transport $profile_num
		get_sip_user_agent_domain $profile_num
		get_sip_user_agent_port $profile_num
		get_sip_user_agent_transport $profile_num
		get_sip_outbound_proxy $profile_num
		get_sip_outbound_proxy_port $profile_num
		get_sip_organization $profile_num
		get_sip_registration_period $profile_num
		# get_sip_invite_expires $profile_num
		get_sip_re_invite_expires $profile_num
		get_sip_register_expires $profile_num
		# get_sip_registers_min_expires $profile_num
		get_sip_register_retry_interval $profile_num
		# get_sip_inbound_auth $profile_num
		# get_sip_inbound_auth_username $profile_num
		# get_sip_inbound_auth_password $profile_num
		# Line
		local line_number="0"
		for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
			let line_number=$line_number+1
			get_line_enable $profile_num $line_name $line_number
			get_line_directory_number $profile_num $line_name $line_number
			get_line_status $profile_num $line_name $line_number
			get_line_call_state $profile_num $line_name $line_number
			get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			get_line_sip_username $profile_num $line_name $line_number
			get_line_sip_password $profile_num $line_name $line_number
			get_line_sip_uri $profile_num $line_name $line_number
		done
	done
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}." "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_enable $profile_num
		get_voice_profile_reset $profile_num
		get_voice_profile_name $profile_num
		get_voice_profile_signaling_protocol $profile_num
		get_voice_profile_max_sessions $profile_num
		get_voice_profile_number_of_lines $profile_num
		get_sip_proxy_server $profile_num
		get_sip_proxy_server_port $profile_num
		get_sip_proxy_server_transport $profile_num
		get_sip_registrar_server $profile_num
		get_sip_registrar_server_port $profile_num
		get_sip_registrar_server_transport $profile_num
		get_sip_user_agent_domain $profile_num
		get_sip_user_agent_port $profile_num
		get_sip_user_agent_transport $profile_num
		get_sip_outbound_proxy $profile_num
		get_sip_outbound_proxy_port $profile_num
		get_sip_organization $profile_num
		get_sip_registration_period $profile_num
		# get_sip_invite_expires $profile_num
		get_sip_re_invite_expires $profile_num
		get_sip_register_expires $profile_num
		# get_sip_registers_min_expires $profile_num
		get_sip_register_retry_interval $profile_num
		# get_sip_inbound_auth $profile_num
		# get_sip_inbound_auth_username $profile_num
		# get_sip_inbound_auth_password $profile_num
		# Line
		local line_number="0"
		for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
			let line_number=$line_number+1
			get_line_enable $profile_num $line_name $line_number
			get_line_directory_number $profile_num $line_name $line_number
			get_line_status $profile_num $line_name $line_number
			get_line_call_state $profile_num $line_name $line_number
			get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			get_line_sip_username $profile_num $line_name $line_number
			get_line_sip_password $profile_num $line_name $line_number
			get_line_sip_uri $profile_num $line_name $line_number
		done
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP." "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_proxy_server $profile_num
		get_sip_proxy_server_port $profile_num
		get_sip_proxy_server_transport $profile_num
		get_sip_registrar_server $profile_num
		get_sip_registrar_server_port $profile_num
		get_sip_registrar_server_transport $profile_num
		get_sip_user_agent_domain $profile_num
		get_sip_user_agent_port $profile_num
		get_sip_user_agent_transport $profile_num
		get_sip_outbound_proxy $profile_num
		get_sip_outbound_proxy_port $profile_num
		get_sip_organization $profile_num
		get_sip_registration_period $profile_num
		# get_sip_invite_expires $profile_num
		get_sip_re_invite_expires $profile_num
		get_sip_register_expires $profile_num
		# get_sip_registers_min_expires $profile_num
		get_sip_register_retry_interval $profile_num
		# get_sip_inbound_auth $profile_num
		# get_sip_inbound_auth_username $profile_num
		# get_sip_inbound_auth_password $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Enable)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Enable" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_enable $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Reset)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Reset" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_reset $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Name)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Name" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_name $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SignalingProtocol)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SignalingProtocol" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_signaling_protocol $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].MaxSessions)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.MaxSessions" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_max_sessions $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].NumberOfLines)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.NumberOfLines" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_number_of_lines $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServer)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServer" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_proxy_server $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServerPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServerPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_proxy_server_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServerTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServerTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_proxy_server_transport $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServer)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServer" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_registrar_server $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServerPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServerPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_registrar_server_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServerTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServerTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_registrar_server_transport $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentDomain)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentDomain" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_user_agent_domain $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_user_agent_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_user_agent_transport $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.OutboundProxy)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.OutboundProxy" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_outbound_proxy $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.OutboundProxyPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.OutboundProxyPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_outbound_proxy_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.Organization)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.Organization" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_organization $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrationPeriod)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrationPeriod" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_registration_period $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InviteExpires)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InviteExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_invite_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ReInviteExpires)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ReInviteExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_re_invite_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegisterExpires)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegisterExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_register_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistersMinExpires)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistersMinExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_registers_min_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegisterRetryInterval)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegisterRetryInterval" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_register_retry_interval $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuth)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuth" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_inbound_auth $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuthUsername)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuthUsername" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_inbound_auth_username $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuthPassword)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuthPassword" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_sip_inbound_auth_password $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line." "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		# Line
		local line_number="0"
		for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
			let line_number=$line_number+1
			get_line_enable $profile_num $line_name $line_number
			get_line_directory_number $profile_num $line_name $line_number
			get_line_status $profile_num $line_name $line_number
			get_line_call_state $profile_num $line_name $line_number
			get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			get_line_sip_username $profile_num $line_name $line_number
			get_line_sip_password $profile_num $line_name $line_number
			get_line_sip_uri $profile_num $line_name $line_number
		done
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}." "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_enable $profile_num $line_name $line_number
				get_line_directory_number $profile_num $line_name $line_number
				get_line_status $profile_num $line_name $line_number
				get_line_call_state $profile_num $line_name $line_number
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
				get_line_sip_username $profile_num $line_name $line_number
				get_line_sip_password $profile_num $line_name $line_number
				get_line_sip_uri $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].Enable)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.Enable" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_enable $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].DirectoryNumber)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.DirectoryNumber" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_directory_number $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].Status)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.Status" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_status $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallState)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallState" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_call_state $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallingFeatures.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallingFeatures." "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallingFeatures.CallerIDName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallingFeatures.CallerIDName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP." "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_username $profile_num $line_name $line_number
				get_line_sip_password $profile_num $line_name $line_number
				get_line_sip_uri $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.AuthUserName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.AuthUserName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_username $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.AuthPassword)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.AuthPassword" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_password $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.URI)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.URI" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_uri $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
esac
return $FAULT_CPE_INVALID_PARAMETER_NAME;
}

get_voice_service_name() {
local max_profile
local max_line
local max_num

get_voice_service_max_profile max_profile
let max_num=$max_profile+1

get_voice_service_max_line max_line

case "$1" in
	InternetGatewayDevice.|\
	InternetGatewayDevice.Services.)
	freecwmp_output "InternetGatewayDevice.Services." "" "1"
	if [ "$2" = "0" ]; then
		freecwmp_output "InternetGatewayDevice.Services.VoiceService."  "" "1"
		freecwmp_output "InternetGatewayDevice.Services.VoiceService.1."  "" "1"
		freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile."  "" "1"
		for profile_num in `seq 0 $max_profile`;do
			get_voice_profile_enable $profile_num
			get_voice_profile_reset $profile_num
			get_voice_profile_name $profile_num
			get_voice_profile_signaling_protocol $profile_num
			get_voice_profile_max_sessions $profile_num
			get_voice_profile_number_of_lines $profile_num
			let i=$profile_num+1
			freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$i.SIP." "" "0"
			get_sip_proxy_server $profile_num
			get_sip_proxy_server_port $profile_num
			get_sip_proxy_server_transport $profile_num
			get_sip_registrar_server $profile_num
			get_sip_registrar_server_port $profile_num
			get_sip_registrar_server_transport $profile_num
			get_sip_user_agent_domain $profile_num
			get_sip_user_agent_port $profile_num
			get_sip_user_agent_transport $profile_num
			get_sip_outbound_proxy $profile_num
			get_sip_outbound_proxy_port $profile_num
			get_sip_organization $profile_num
			get_sip_registration_period $profile_num
			# get_sip_invite_expires $profile_num
			get_sip_re_invite_expires $profile_num
			get_sip_register_expires $profile_num
			# get_sip_registers_min_expires $profile_num
			get_sip_register_retry_interval $profile_num
			# get_sip_inbound_auth $profile_num
			# get_sip_inbound_auth_username $profile_num
			# get_sip_inbound_auth_password $profile_num
			# Line
			local line_number="0"
			for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
				let line_number=$line_number+1
				freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$i.Line.$line_number." "" "1"
				get_line_enable $profile_num $line_name $line_number
				get_line_directory_number $profile_num $line_name $line_number
				get_line_status $profile_num $line_name $line_number
				get_line_call_state $profile_num $line_name $line_number
				freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$i.Line.$line_number.CallingFeatures." "" "0"
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
				freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.$i.Line.$line_number.SIP." "" "0"
				get_line_sip_username $profile_num $line_name $line_number
				get_line_sip_password $profile_num $line_name $line_number
				get_line_sip_uri $profile_num $line_name $line_number
			done
		done
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.)
	freecwmp_output "InternetGatewayDevice.Services.VoiceService."  "" "1"
	if [ "$2" = "0" ]; then
		freecwmp_output "InternetGatewayDevice.Services.VoiceService.1."  "" "1"
		freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile."  "" "1"
		for profile_num in `seq 0 $max_profile`;do
			get_voice_profile_enable $profile_num
			get_voice_profile_reset $profile_num
			get_voice_profile_name $profile_num
			get_voice_profile_signaling_protocol $profile_num
			get_voice_profile_max_sessions $profile_num
			get_voice_profile_number_of_lines $profile_num
			let i=$profile_num+1
			freecwmp_output "$1\1.VoiceProfile.$i.SIP." "" "0"
			get_sip_proxy_server $profile_num
			get_sip_proxy_server_port $profile_num
			get_sip_proxy_server_transport $profile_num
			get_sip_registrar_server $profile_num
			get_sip_registrar_server_port $profile_num
			get_sip_registrar_server_transport $profile_num
			get_sip_user_agent_domain $profile_num
			get_sip_user_agent_port $profile_num
			get_sip_user_agent_transport $profile_num
			get_sip_outbound_proxy $profile_num
			get_sip_outbound_proxy_port $profile_num
			get_sip_organization $profile_num
			get_sip_registration_period $profile_num
			# get_sip_invite_expires $profile_num
			get_sip_re_invite_expires $profile_num
			get_sip_register_expires $profile_num
			# get_sip_registers_min_expires $profile_num
			get_sip_register_retry_interval $profile_num
			# get_sip_inbound_auth $profile_num
			# get_sip_inbound_auth_username $profile_num
			# get_sip_inbound_auth_password $profile_num
			# Line
			local line_number="0"
			for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
				let line_number=$line_number+1
				freecwmp_output "$1\1.VoiceProfile.$i.Line.$line_number." "" "1"
				get_line_enable $profile_num $line_name $line_number
				get_line_directory_number $profile_num $line_name $line_number
				get_line_status $profile_num $line_name $line_number
				get_line_call_state $profile_num $line_name $line_number
				freecwmp_output "$1\1.VoiceProfile.$i.Line.$line_number.CallingFeatures." "" "0"
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
				freecwmp_output "$1\1.VoiceProfile.$i.Line.$line_number.SIP." "" "0"
				get_line_sip_username $profile_num $line_name $line_number
				get_line_sip_password $profile_num $line_name $line_number
				get_line_sip_uri $profile_num $line_name $line_number
			done
		done
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.)
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1."  "" "1"
	if [ "$2" = "0" ]; then
		freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile."  "" "1"
		for profile_num in `seq 0 $max_profile`;do
			get_voice_profile_enable $profile_num
			get_voice_profile_reset $profile_num
			get_voice_profile_name $profile_num
			get_voice_profile_signaling_protocol $profile_num
			get_voice_profile_max_sessions $profile_num
			get_voice_profile_number_of_lines $profile_num
			let i=$profile_num+1
			freecwmp_output "$1VoiceProfile.$i.SIP." "" "0"
			get_sip_proxy_server $profile_num
			get_sip_proxy_server_port $profile_num
			get_sip_proxy_server_transport $profile_num
			get_sip_registrar_server $profile_num
			get_sip_registrar_server_port $profile_num
			get_sip_registrar_server_transport $profile_num
			get_sip_user_agent_domain $profile_num
			get_sip_user_agent_port $profile_num
			get_sip_user_agent_transport $profile_num
			get_sip_outbound_proxy $profile_num
			get_sip_outbound_proxy_port $profile_num
			get_sip_organization $profile_num
			get_sip_registration_period $profile_num
			# get_sip_invite_expires $profile_num
			get_sip_re_invite_expires $profile_num
			get_sip_register_expires $profile_num
			# get_sip_registers_min_expires $profile_num
			get_sip_register_retry_interval $profile_num
			# get_sip_inbound_auth $profile_num
			# get_sip_inbound_auth_username $profile_num
			# get_sip_inbound_auth_password $profile_num
			# Line
			local line_number="0"
			for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
				freecwmp_output "$1.VoiceProfile.$i.Line.$line_number." "" "1"
				get_line_enable $profile_num $line_name $line_number
				get_line_directory_number $profile_num $line_name $line_number
				get_line_status $profile_num $line_name $line_number
				get_line_call_state $profile_num $line_name $line_number
				freecwmp_output "$1VoiceProfile.$i.Line.$line_number.CallingFeatures." "" "0"
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
				freecwmp_output "$1VoiceProfile.$i.Line.$line_number.SIP." "" "0"
				get_line_sip_username $profile_num $line_name $line_number
				get_line_sip_password $profile_num $line_name $line_number
				get_line_sip_uri $profile_num $line_name $line_number
			done
		done
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.)
	freecwmp_output "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile."  "" "1"
	if [ "$2" = "0" ]; then
		for profile_num in `seq 0 $max_profile`;do
			get_voice_profile_enable $profile_num
			get_voice_profile_reset $profile_num
			get_voice_profile_name $profile_num
			get_voice_profile_signaling_protocol $profile_num
			get_voice_profile_max_sessions $profile_num
			get_voice_profile_number_of_lines $profile_num
			let i=$profile_num+1
			freecwmp_output "$1$i.SIP." "" "0"
			get_sip_proxy_server $profile_num
			get_sip_proxy_server_port $profile_num
			get_sip_proxy_server_transport $profile_num
			get_sip_registrar_server $profile_num
			get_sip_registrar_server_port $profile_num
			get_sip_registrar_server_transport $profile_num
			get_sip_user_agent_domain $profile_num
			get_sip_user_agent_port $profile_num
			get_sip_user_agent_transport $profile_num
			get_sip_outbound_proxy $profile_num
			get_sip_outbound_proxy_port $profile_num
			get_sip_organization $profile_num
			get_sip_registration_period $profile_num
			# get_sip_invite_expires $profile_num
			get_sip_re_invite_expires $profile_num
			get_sip_register_expires $profile_num
			# get_sip_registers_min_expires $profile_num
			get_sip_register_retry_interval $profile_num
			# get_sip_inbound_auth $profile_num
			# get_sip_inbound_auth_username $profile_num
			# get_sip_inbound_auth_password $profile_num
			# Line
			local line_number="0"
			for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
				let line_number=$line_number+1
				freecwmp_output "$1$i.Line.$line_number." "" "1"
				get_line_enable $profile_num $line_name $line_number
				get_line_directory_number $profile_num $line_name $line_number
				get_line_status $profile_num $line_name $line_number
				get_line_call_state $profile_num $line_name $line_number
				freecwmp_output "$1$i.Line.$line_number.CallingFeatures." "" "0"
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
				freecwmp_output "$1$i.Line.$line_number.SIP." "" "0"
				get_line_sip_username $profile_num $line_name $line_number
				get_line_sip_password $profile_num $line_name $line_number
				get_line_sip_uri $profile_num $line_name $line_number
			done
		done
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}." "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		get_voice_profile_enable $profile_num
		get_voice_profile_reset $profile_num
		get_voice_profile_name $profile_num
		get_voice_profile_signaling_protocol $profile_num
		get_voice_profile_max_sessions $profile_num
		get_voice_profile_number_of_lines $profile_num
		if [ "$2" = "0" ]; then
			freecwmp_output "$1SIP." "" "0"
			get_sip_proxy_server $profile_num
			get_sip_proxy_server_port $profile_num
			get_sip_proxy_server_transport $profile_num
			get_sip_registrar_server $profile_num
			get_sip_registrar_server_port $profile_num
			get_sip_registrar_server_transport $profile_num
			get_sip_user_agent_domain $profile_num
			get_sip_user_agent_port $profile_num
			get_sip_user_agent_transport $profile_num
			get_sip_outbound_proxy $profile_num
			get_sip_outbound_proxy_port $profile_num
			get_sip_organization $profile_num
			get_sip_registration_period $profile_num
			# get_sip_invite_expires $profile_num
			get_sip_re_invite_expires $profile_num
			get_sip_register_expires $profile_num
			# get_sip_registers_min_expires $profile_num
			get_sip_register_retry_interval $profile_num
			# get_sip_inbound_auth $profile_num
			# get_sip_inbound_auth_username $profile_num
			# get_sip_inbound_auth_password $profile_num
			# Line
			local line_number="0"
			for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
				let line_number=$line_number+1
				freecwmp_output "$1Line.$line_number." "" "1"
				get_line_enable $profile_num $line_name $line_number
				get_line_directory_number $profile_num $line_name $line_number
				get_line_status $profile_num $line_name $line_number
				get_line_call_state $profile_num $line_name $line_number
				freecwmp_output "$1Line.$line_number.CallingFeatures." "" "0"
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
				freecwmp_output "$1Line.$line_number.SIP." "" "0"
				get_line_sip_username $profile_num $line_name $line_number
				get_line_sip_password $profile_num $line_name $line_number
				get_line_sip_uri $profile_num $line_name $line_number
			done
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP." "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		freecwmp_output "$1" "" "0"
		if [ "$2" = "0" ];then
			get_sip_proxy_server $profile_num
			get_sip_proxy_server_port $profile_num
			get_sip_proxy_server_transport $profile_num
			get_sip_registrar_server $profile_num
			get_sip_registrar_server_port $profile_num
			get_sip_registrar_server_transport $profile_num
			get_sip_user_agent_domain $profile_num
			get_sip_user_agent_port $profile_num
			get_sip_user_agent_transport $profile_num
			get_sip_outbound_proxy $profile_num
			get_sip_outbound_proxy_port $profile_num
			get_sip_organization $profile_num
			get_sip_registration_period $profile_num
			# get_sip_invite_expires $profile_num
			get_sip_re_invite_expires $profile_num
			get_sip_register_expires $profile_num
			# get_sip_registers_min_expires $profile_num
			get_sip_register_retry_interval $profile_num
			# get_sip_inbound_auth $profile_num
			# get_sip_inbound_auth_username $profile_num
			# get_sip_inbound_auth_password $profile_num
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Enable)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Enable" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_voice_profile_enable $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Reset)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Reset" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_voice_profile_reset $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Name)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Name" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_voice_profile_name $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SignalingProtocol)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SignalingProtocol" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_voice_profile_signaling_protocol $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].MaxSessions)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.MaxSessions" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_voice_profile_max_sessions $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].NumberOfLines)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.NumberOfLines" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_voice_profile_number_of_lines $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServer)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServer" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_proxy_server $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServerPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServerPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_proxy_server_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServerTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServerTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_proxy_server_transport $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServer)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServer" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_registrar_server $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServerPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServerPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_registrar_server_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServerTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServerTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_registrar_server_transport $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentDomain)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentDomain" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_user_agent_domain $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_user_agent_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_user_agent_transport $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.OutboundProxy)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.OutboundProxy" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_outbound_proxy $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.OutboundProxyPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.OutboundProxyPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_outbound_proxy_port $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.Organization)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.Organization" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_organization $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrationPeriod)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrationPeriod" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_registration_period $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InviteExpires)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InviteExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_invite_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ReInviteExpires)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ReInviteExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_re_invite_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegisterExpires)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegisterExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_register_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistersMinExpires)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistersMinExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_registers_min_expires $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegisterRetryInterval)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegisterRetryInterval" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_register_retry_interval $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuth)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuth" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_inbound_auth $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuthUsername)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuthUsername" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_inbound_auth_username $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuthPassword)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuthPassword" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		if [ "$2" = "1" ]; then
			return $FAULT_CPE_INVALID_ARGUMENTS
		fi
		get_sip_inbound_auth_password $profile_num
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line." "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		freecwmp_output "$1" "" "1"
		# Line
		if [ "$2" = "0" ];then
			local line_number="0"
			for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
				let line_number=$line_number+1
					freecwmp_output "$1$line_number." "" "1"
					get_line_enable $profile_num $line_name $line_number
					get_line_directory_number $profile_num $line_name $line_number
					get_line_status $profile_num $line_name $line_number
					get_line_call_state $profile_num $line_name $line_number
					freecwmp_output "$1$line_number.CallingFeatures." "" "0"
					get_line_calling_features_caller_id_name $profile_num $line_name $line_number
					freecwmp_output "$1$line_number.SIP." "" "0"
					get_line_sip_username $profile_num $line_name $line_number
					get_line_sip_password $profile_num $line_name $line_number
					get_line_sip_uri $profile_num $line_name $line_number
			done
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}." "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				freecwmp_output "$1" "" "1"
				get_line_enable $profile_num $line_name $line_number
				get_line_directory_number $profile_num $line_name $line_number
				get_line_status $profile_num $line_name $line_number
				get_line_call_state $profile_num $line_name $line_number
				if [ "$2" = "0" ];then
					freecwmp_output "$1CallingFeatures." "" "0"
					get_line_calling_features_caller_id_name $profile_num $line_name $line_number
					freecwmp_output "$1SIP." "" "0"
					get_line_sip_username $profile_num $line_name $line_number
					get_line_sip_password $profile_num $line_name $line_number
					get_line_sip_uri $profile_num $line_name $line_number
				fi
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallingFeatures.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallingFeatures." "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				freecwmp_output "$1" "" "0"
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallingFeatures.CallerIDName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallingFeatures.CallerIDName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				if [ "$2" = "1" ]; then
					return $FAULT_CPE_INVALID_ARGUMENTS
				fi
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_calling_features_caller_id_name $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP." "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				freecwmp_output "$1" "" "0"
				get_line_sip_username $profile_num $line_name $line_number
				get_line_sip_password $profile_num $line_name $line_number
				get_line_sip_uri $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.AuthUserName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.AuthUserName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				if [ "$2" = "1" ]; then
					return $FAULT_CPE_INVALID_ARGUMENTS
				fi
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_username $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.AuthPassword)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.AuthPassword" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				if [ "$2" = "1" ]; then
					return $FAULT_CPE_INVALID_ARGUMENTS
				fi
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_password $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.URI)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.URI" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				if [ "$2" = "1" ]; then
					return $FAULT_CPE_INVALID_ARGUMENTS
				fi
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				get_line_sip_uri $profile_num $line_name $line_number
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
esac
return $FAULT_CPE_INVALID_PARAMETER_NAME;
}

set_voice_service() {
local max_profile
local max_line
local max_num

get_voice_service_max_profile max_profile
let max_num=$max_profile+1

get_voice_service_max_line max_line

case "$1" in
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Enable)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Enable" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_voice_profile_enable $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Reset)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Reset" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_voice_profile_reset $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Name)
	return $FAULT_CPE_NON_WRITABLE_PARAMETER
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SignalingProtocol)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SignalingProtocol" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_voice_profile_signaling_protocol $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].MaxSessions)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.MaxSessions" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_voice_profile_max_sessions $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].NumberOfLines)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.NumberOfLines" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_voice_profile_number_of_lines $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServer)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServer" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_proxy_server $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServerPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServerPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_proxy_server_port $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServerTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServerTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_proxy_server_transport $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServer)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServer" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_registrar_server $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServerPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServerPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_registrar_server_port $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServerTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServerTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_registrar_server_transport $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentDomain)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentDomain" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_user_agent_domain $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_user_agent_port $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_user_agent_transport $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.OutboundProxy)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.OutboundProxy" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_outbound_proxy $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.OutboundProxyPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.OutboundProxyPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_outbound_proxy_port $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.Organization)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.Organization" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_organization $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrationPeriod)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrationPeriod" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_registration_period $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InviteExpires)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InviteExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_invite_expires $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ReInviteExpires)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ReInviteExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_re_invite_expires $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegisterExpires)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegisterExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_register_expires $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistersMinExpires)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistersMinExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_registers_min_expires $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegisterRetryInterval)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegisterRetryInterval" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_register_retry_interval $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuth)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuth" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_inbound_auth $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuthUsername)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuthUsername" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_inbound_auth_username $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuthPassword)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuthPassword" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_inbound_auth_password $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].Enable)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.Enable" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_enable $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].DirectoryNumber)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.DirectoryNumber" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_directory_number $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].Status)
	return $FAULT_CPE_NON_WRITABLE_PARAMETER
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallState)
	return $FAULT_CPE_NON_WRITABLE_PARAMETER
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallingFeatures.CallerIDName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallingFeatures.CallerIDName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_calling_features_caller_id_name $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.AuthUserName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.AuthUserName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_sip_username $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.AuthPassword)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.AuthPassword" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_sip_password $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.URI)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.URI" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_sip_uri $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallingFeatures.CallerIDName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallingFeatures.CallerIDName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_calling_features_caller_id_name $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
esac
return $FAULT_CPE_INVALID_PARAMETER_NAME;
}

set_voice_service_notification() {
local max_profile
local max_line
local max_num

get_voice_service_max_profile max_profile
let max_num=$max_profile+1

get_voice_service_max_line max_line

case "$1" in
	InternetGatewayDevice.)
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.)
	freecwmp_set_parameter_notification "$1" "$2"
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.)
	freecwmp_set_parameter_notification "$1" "$2"
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.)
	freecwmp_set_parameter_notification "$1" "$2"
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.)
	freecwmp_set_parameter_notification "$1" "$2"
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].)
	freecwmp_output "$1Enable" "0"           
	freecwmp_output "$1Reset" "0"            
	freecwmp_output "$1Name" "0"
	freecwmp_output "$1Signaling" "0"
	freecwmp_output "$1MaxSessions" "0"
	freecwmp_output "$1NumberOfLines" "0"
	freecwmp_output "$1SIP.ProxyServer" "0"
	freecwmp_output "$1SIP.ProxyServerPort" "0"
	freecwmp_output "$1SIP.ProxyServerTransport" "0"
	freecwmp_output "$1SIP.RegistrarServer" "0"
	freecwmp_output "$1SIP.RegistrarServerPort" "0"
	freecwmp_output "$1SIP.RegistrarServerTransport" "0"
	freecwmp_output "$1SIP.UserAgentDomain" "0"
	freecwmp_output "$1SIP.UserAgentPort" "0"
	freecwmp_output "$1SIP.UserAgentTransport" "0"
	freecwmp_output "$1SIP.OutboundProxy" "0"
	freecwmp_output "$1SIP.OutboundProxyPort" "0"
	freecwmp_output "$1SIP.Organization" "0"
	freecwmp_output "$1SIP.RegistrationPeriod" "0"
	freecwmp_output "$1SIP.InviteExpires" "0"
	freecwmp_output "$1SIP.ReInviteExpires" "0"
	freecwmp_output "$1SIP.RegisterExpires" "0"
	freecwmp_output "$1SIP.RegistersMinExpires" "0"
	freecwmp_output "$1SIP.RegisterRetryInterval" "0"
	freecwmp_output "$1SIP.InboundAuth" "0"
	freecwmp_output "$1SIP.InboundAuthUsername" "0"
	freecwmp_output "$1SIP.InboundAuthPassword" "0"
	freecwmp_set_parameter_notification "$1" "$2"
	freecwmp_set_parameter_notification "$1" "$2"
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.)
	freecwmp_output "$1ProxyServer" "0"
	freecwmp_output "$1ProxyServerPort" "0"
	freecwmp_output "$1ProxyServerTransport" "0"
	freecwmp_output "$1RegistrarServer" "0"
	freecwmp_output "$1RegistrarServerPort" "0"
	freecwmp_output "$1RegistrarServerTransport" "0"
	freecwmp_output "$1UserAgentDomain" "0"
	freecwmp_output "$1UserAgentPort" "0"
	freecwmp_output "$1UserAgentTransport" "0"
	freecwmp_output "$1OutboundProxy" "0"
	freecwmp_output "$1OutboundProxyPort" "0"
	freecwmp_output "$1Organization" "0"
	freecwmp_output "$1RegistrationPeriod" "0"
	freecwmp_output "$1InviteExpires" "0"
	freecwmp_output "$1ReInviteExpires" "0"
	freecwmp_output "$1RegisterExpires" "0"
	freecwmp_output "$1RegistersMinExpires" "0"
	freecwmp_output "$1RegisterRetryInterval" "0"
	freecwmp_output "$1InboundAuth" "0"
	freecwmp_output "$1InboundAuthUsername" "0"
	freecwmp_output "$1InboundAuthPassword" "0"
	freecwmp_set_parameter_notification "$1" "$2"
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Enable)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Enable" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_voice_profile_enable $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Reset)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Reset" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_voice_profile_reset $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Name)
	return $FAULT_CPE_NOTIFICATION_REJECTED
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SignalingProtocol)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SignalingProtocol" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_voice_profile_signaling_protocol $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].MaxSessions)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.MaxSessions" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_voice_profile_max_sessions $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].NumberOfLines)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.NumberOfLines" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_voice_profile_number_of_lines $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServer)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServer" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_proxy_server $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServerPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServerPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_proxy_server_port $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ProxyServerTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ProxyServerTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_proxy_server_transport $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServer)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServer" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_registrar_server $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServerPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServerPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_registrar_server_port $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrarServerTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrarServerTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_registrar_server_transport $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentDomain)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentDomain" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_user_agent_domain $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_user_agent_port $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.UserAgentTransport)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.UserAgentTransport" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_user_agent_transport $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.OutboundProxy)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.OutboundProxy" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_outbound_proxy $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.OutboundProxyPort)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.OutboundProxyPort" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_outbound_proxy_port $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.Organization)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.Organization" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_organization $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistrationPeriod)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistrationPeriod" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_registration_period $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InviteExpires)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InviteExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_invite_expires $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.ReInviteExpires)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.ReInviteExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_re_invite_expires $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegisterExpires)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegisterExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_register_expires $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegistersMinExpires)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegistersMinExpires" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_registers_min_expires $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.RegisterRetryInterval)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.RegisterRetryInterval" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_register_retry_interval $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuth)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuth" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_inbound_auth $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuthUsername)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuthUsername" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_inbound_auth_username $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].SIP.InboundAuthPassword)
	return $FAULT_CPE_INVALID_PARAMETER_NAME
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.SIP.InboundAuthPassword" "rc" "num"
	if [ $rc -eq 0 ] && [ $num -gt 0 ] && [ $num -le $max_num ]; then
		let profile_num=$num-1
		set_sip_inbound_auth_password $profile_num $2
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].Enable)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.Enable" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_enable $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].DirectoryNumber)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.DirectoryNumber" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_directory_number $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].Status)
	return $FAULT_CPE_NOTIFICATION_REJECTED
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallState)
	return $FAULT_CPE_NOTIFICATION_REJECTED
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].CallingFeatures.CallerIDName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.CallingFeatures.CallerIDName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_calling_features_caller_id_name $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.AuthUserName)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.AuthUserName" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_sip_username $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.AuthPassword)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.AuthPassword" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_sip_password $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
	InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.[1-$max_num].Line.[1-$max_line].SIP.URI)
	freecwmp_parse_formated_parameter "$1" "InternetGatewayDevice.Services.VoiceService.1.VoiceProfile.{i}.Line.{i}.SIP.URI" "rc" "num"
	if [ $rc -eq 0 ]; then
		local profile_num=`echo $num | awk '{ print $1 }'`
		local line_number=`echo $num | awk '{ print $2 }'`
		if [ $profile_num -gt 0 ] && [ $profile_num -le $max_num ]; then
			let profile_num=$profile_num-1
			# Line
			local max_line_number=`/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q show voice_client|grep brcm|grep -c sip$profile_num`
			if [ $line_number -gt 0 ] && [ $line_number -le $max_line_number ]; then
				local count=0
				for line_name in `/sbin/uci ${UCI_CONFIG_DIR:+-c $UCI_CONFIG_DIR} -q  show  voice_client|grep sip_account|grep sip$profile_num|awk -F'.' '{print$2}'`;do
					let count=$count+1
					if [ "$count" = "$line_number" ];then break;fi
				done
				set_line_sip_uri $profile_num $line_name $line_number $2
			else
				return $FAULT_CPE_INVALID_PARAMETER_NAME;
			fi
		else
			return $FAULT_CPE_INVALID_PARAMETER_NAME;
		fi
	fi
	return $FAULT_CPE_NO_FAULT
	;;
esac
return $FAULT_CPE_INVALID_PARAMETER_NAME;
}
